/* jQuery Photo Collage Plugin for WYSIWYG Web Builder 15 - Copyright Pablo Software solutions 2019 - http://www.wysiwygwebbuilder.com */
(function(e){function q(a,d,c){for(var e=Math.sqrt(a.length),g=0,h=0;h<e;h++)for(var b=0;b<e;b++){var f=parseInt(a[h*e+b]);if(0!=f){if(g==d){c.left=b;c.top=h;c.width=f;c.height=f;return}g++}}}function n(a,d){l||(l=!0,setTimeout(function(){p(a,d)},60))}function r(a){if(a.is(":hidden"))return!1;e(window).scrollTop();e(window).height();a.offset();a.height();var d=a[0];a=d.offsetHeight;var c=window.document.documentElement;c=window.pageYOffset||c.scrollTop;var m=window.document.documentElement.clientHeight,
g=window.innerHeight;m=c+(m<g?g:m);g=0;do isNaN(d.offsetTop)||(g+=d.offsetTop),isNaN(d.offsetLeft);while(d=d.offsetParent);d=g;return d+1*a<=m&&d+a-1*a>=c}function p(a,d){r(a)&&(e(window).off("scroll resize"),k(a,!0,d),e(window).resize(function(){k(a,!1,d)}));l=!1}function k(a,d,c){var e=c.matrix.split(","),g=Math.sqrt(e.length),h=a.outerWidth();g=(h-(g-1)*c.padding)/g;a.find(".thumbnails").width(h).height(h);a=a.find(".thumbnail");for(h=0;h<a.length;h++){var b={left:0,top:0,width:0,height:0};q(e,
h,b);if(0!=b.width){var f=a.eq(h),k=b.left*c.padding,l=b.top*c.padding,n=b.width*c.padding-c.padding,p=b.height*c.padding-c.padding;b.left*=g;b.top*=g;b.width*=g;b.height*=g;b.width+=n;b.height+=p;b.left+=k;b.top+=l;f.css("left",b.left+"px");f.css("top",b.top+"px");f.css("width",b.width+"px");f.css("height",b.height+"px");d&&("fade"==c.effect?f.fadeTo(c.duration,1):"randomfade"==c.effect?(delay=900*Math.random()+100,f.delay(delay).fadeTo(c.duration,1)):"slide"==c.effect||"blind"==c.effect||"drop"==
c.effect?(dir=Math.floor(3*Math.random()),delay=Math.floor(900*Math.random()+100),f.hide(),f.css("opacity","1"),f.delay(delay).show(c.effect,{direction:["left","right","up","down"][dir]},c.duration)):"css"==c.effect?(delay=900*Math.random()+100,setTimeout(function(a){a.addClass("effect")},delay,f)):(delay=Math.floor(900*Math.random()+100),f.hide(),f.css("opacity","1"),f.delay(delay).show(c.effect,c.duration)))}}}e.fn.photocollage=function(a){var d=e.extend({matrix:"2,0,1,0,0,1,1,1,1",padding:2,effect:"fade",
duration:1500,lazyload:!1},a);return this.each(function(){e.photocollage(e(this),d)})};e.photocollage=function(a,d){d.lazyload?(e(window).on("scroll resize",function(){n(a,d)}),n(a,d)):(e(window).resize(function(){k(a,!1,d)}),k(a,!0,d))};var l=!1})(jQuery);